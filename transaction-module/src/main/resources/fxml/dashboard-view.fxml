<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.SVGPath?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="org.jala.university.presentation.controller.DashboardController"
            stylesheets="@../styles/dashboard.css">
    <center>
        <ScrollPane fitToWidth="true" fitToHeight="true" pannable="true">
            <VBox spacing="20" fx:id="dashboardRoot"
                  prefWidth="900" prefHeight="700">
                <padding>
                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0"/>
                </padding>

                <!-- Header Section -->
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label text="Dashboard" styleClass="header-label"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="Meu Perfil" onAction="#handleViewProfile" styleClass="profile-button"/>
                    <Label fx:id="userNameLabel" text="Bem-vindo(a)" styleClass="welcome-label"/>
                </HBox>

                <!-- Summary Cards Section -->
                <HBox spacing="20" alignment="CENTER">
                    <!-- Balance Card -->
                    <VBox styleClass="dashboard-card, balance-card" spacing="10" HBox.hgrow="ALWAYS">
                        <padding>
                            <Insets bottom="15.0" left="15.0" right="15.0" top="15.0"/>
                        </padding>
                        <HBox alignment="CENTER_LEFT" spacing="10">
                            <StackPane styleClass="card-icon-container">
                                <SVGPath
                                        content="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M11,17V16H9V14H13V13H10A1,1 0 0,1 9,12V9A1,1 0 0,1 10,8H11V7H13V8H15V10H11V11H14A1,1 0 0,1 15,12V15A1,1 0 0,1 14,16H13V17H11Z"
                                        styleClass="card-icon"/>
                            </StackPane>
                            <Label text="Saldo Atual" styleClass="subheader-label"/>
                        </HBox>
                        <Label fx:id="balanceLabel" text="R$ 0,00" styleClass="balance-label"/>
                    </VBox>

                    <!-- Transaction Count Card -->
                    <VBox styleClass="dashboard-card, transaction-card" spacing="10" HBox.hgrow="ALWAYS">
                        <padding>
                            <Insets bottom="15.0" left="15.0" right="15.0" top="15.0"/>
                        </padding>
                        <HBox alignment="CENTER_LEFT" spacing="10">
                            <StackPane styleClass="card-icon-container">
                                <SVGPath
                                        content="M19,3H14.82C14.4,1.84 13.3,1 12,1C10.7,1 9.6,1.84 9.18,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M12,3A1,1 0 0,1 13,4A1,1 0 0,1 12,5A1,1 0 0,1 11,4A1,1 0 0,1 12,3M7,7H17V5H19V19H5V5H7V7M7,13H9V11H7V13M7,17H9V15H7V17M11,17H13V15H11V17M11,13H13V11H11V13M15,17H17V15H15V17M15,13H17V11H15V13Z"
                                        styleClass="card-icon"/>
                            </StackPane>
                            <Label text="Últimas Transações" styleClass="subheader-label"/>
                        </HBox>
                        <Label fx:id="transactionCountLabel" text="0" styleClass="transaction-count-label"/>
                    </VBox>
                </HBox>

                <!-- Quick Actions Section -->
                <VBox spacing="10">
                    <Label text="Ações Rápidas" styleClass="section-label"/>

                    <GridPane hgap="10" vgap="10">
                        <columnConstraints>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0"/>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0"/>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0"/>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0"/>
                        </columnConstraints>
                        <rowConstraints>
                            <RowConstraints minHeight="10.0" prefHeight="40.0" vgrow="SOMETIMES"/>
                        </rowConstraints>

                        <Button text="Nova Transferência" onAction="#handleNewTransaction" maxWidth="Infinity"
                                GridPane.columnIndex="0" styleClass="action-button, transfer-button"/>
                        <Button text="Histórico" onAction="#handleViewHistory" maxWidth="Infinity"
                                GridPane.columnIndex="1" styleClass="action-button, history-button"/>
                        <Button text="Beneficiários" onAction="#handleBeneficiaryManagement" maxWidth="Infinity"
                                GridPane.columnIndex="2" styleClass="action-button, beneficiary-button"/>
                        <Button text="Extrato" maxWidth="Infinity" onAction="#handleViewStatement"
                                GridPane.columnIndex="3" styleClass="action-button, statement-button"/>
                        <Button text="Sair" maxWidth="Infinity" onAction="#handleLogout"
                                GridPane.columnIndex="4" styleClass="action-button, logout-button">
                            <graphic>
                                <HBox spacing="5" alignment="CENTER">
                                    <SVGPath
                                            content="M17,17.25V14H10V10H17V6.75L22.25,12L17,17.25M13,2A2,2 0 0,1 15,4V8H13V4H4V20H13V16H15V20A2,2 0 0,1 13,22H4A2,2 0 0,1 2,20V4A2,2 0 0,1 4,2H13Z"
                                            fill="WHITE"/>
                                </HBox>
                            </graphic>
                        </Button>
                    </GridPane>
                </VBox>

                <!-- Recent Transactions Section -->
                <VBox spacing="10" VBox.vgrow="ALWAYS">
                    <Label text="Transações Recentes" styleClass="section-label"/>

                    <TableView fx:id="recentTransactionsTable" VBox.vgrow="ALWAYS" styleClass="transactions-table"
                               HBox.hgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="dateColumn" text="Data" prefWidth="120"/>
                            <TableColumn fx:id="descriptionColumn" text="Descrição" prefWidth="200"/>
                            <TableColumn fx:id="amountColumn" text="Valor" prefWidth="100"/>
                            <TableColumn fx:id="statusColumn" text="Status" prefWidth="100"/>
                        </columns>
                        <placeholder>
                            <Label text="Nenhuma transação encontrada"/>
                        </placeholder>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                        </columnResizePolicy>
                    </TableView>
                </VBox>
            </VBox>
        </ScrollPane>
    </center>
</BorderPane>
